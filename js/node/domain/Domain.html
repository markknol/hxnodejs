<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../../bootstrap/css/bootstrap.min.css" rel="stylesheet"/><link href="../../../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/><link href="../../../bootstrap/css/bootstrap-select.min.css" rel="stylesheet"/><link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/><link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600,600italic,400" rel="stylesheet" type="text/css"/><link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet" type="text/css"/><script src="../../../jquery-1.9.1.min.js"></script><script src="../../../bootstrap/js/bootstrap.min.js"></script><script src="../../../bootstrap/js/bootstrap-select.min.js"></script><link href="../../../styles.css" rel="stylesheet"/><link href="../../../haxe-nav.css" rel="stylesheet"/><script type="text/javascript">var dox = {rootPath: "../../../",platforms: ["js"]};</script><script type="text/javascript" src="../../..//nav.js"></script><script type="text/javascript" src="../../..//index.js"></script><link rel="icon" href="../../..//favicon.ico" type="image/x-icon"></link><title>js.node.domain.Domain</title><meta name="description" content="The Domain class encapsulates the functionality of routing errors
and uncaught exceptions to the active Domain object."/></head><body><nav class="section nav dark"><div class="navbar navbar-fixed-top navbar-inverse"><div class="navbar-inner"><button class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse" type="button"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="brand haxe-logo" href="http://haxe.org/"><img alt="Haxe" height="21" onerror="this.src='http://haxe.org/img/haxe-logo-horizontal-on-dark.png'" src="http://haxe.org/img/haxe-logo-horizontal-on-dark.svg" width="107"/></a><a class="brand sub lib" href="/">API</a><div class="nav-collapse collapse"><ul class="nav"><!-- required submenu  on every subsite, put class="active" on   -->
<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="/documentation/">Learn Haxe <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://haxe.org/documentation/">Introduction</a></li><li class="divider"></li><li><a href="http://haxe.org/manual/">Manual</a></li><li class="active"><a href="http://api.haxe.org">API Documentation</a></li><li class="divider"></li><li><a href="http://try.haxe.org">Try Haxe</a></li><li><a href="http://lib.haxe.org">Haxelib</a></li><li><a href="http://code.haxe.org">Code Cookbook</a></li></ul></li><li class=" dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Connect <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://github.com/HaxeFoundation"><i class="fa fa-github"></i> Github</a></li><li><a href="https://github.com/HaxeFoundation/haxe/issues"><i class="fa fa-github"></i> Bug reports</a></li><li><a href="http://stackoverflow.com/questions/tagged/haxe"><i class="fa fa-stack-exchange"></i> Stack Overflow</a></li><li><a href="http://groups.google.com/group/haxelang?hl=en"><i class="fa fa-envelope-o"></i> Google Groups</a></li><li><a href="http://webchat.freenode.net/?channels=haxe"><i class="fa fa-comments-o"></i> IRC</a></li><li><a href="http://haxe.org/blog"><i class="fa fa-rss"></i> Blog</a></li><li class="divider"></li><li><a href="https://plus.google.com/communities/103302587329918132234"><i class="fa fa-google-plus"></i> Google+</a></li><li><a href="https://www.facebook.com/haxe.org/"><i class="fa fa-facebook"></i> Facebook</a></li><li><a href="https://twitter.com/search?q=%23haxe"><i class="fa fa-twitter"></i> #haxe</a></li><li><a href="https://twitter.com/haxelang"><i class="fa fa-twitter"></i> @haxelang</a></li><li><a href="https://twitter.com/haxe_org"><i class="fa fa-twitter"></i> @haxe_org</a></li><li class="divider"></li><li><a href="http://haxe.org/foundation/contact.html">Contact</a></li></ul></li></ul></div></div></div></nav><div class="container main-content"><div class="row-fluid"><div class="span3"><div class="well sidebar-nav"><form class="form-search" id="searchForm"><div class="input-prepend input-block-level"><span class="add-on"><i class="icon-search"></i></span><input id="search" type="text" placeholder="Search" autocomplete="off"/></div></form></div><div class="well sidebar-nav"><div id="nav"></div></div></div><div class="span9"><div class="page-header"><span class="viewsource"><a href="https://github.com/HaxeFoundation/hxnodejs/blob/master/src/js/node/domain/Domain.hx" class="btn btn-medium"><i class="fa fa-eye"></i> View source</a></span><h1><small>class</small> Domain</h1><h4><small>package <a href="../../../js/node/domain/index.html">js.node.domain</a></small></h4><h4><small>extends <a class="type" title="All objects which emit events are instances of EventEmitter." href="../../../js/node/events/EventEmitter.html">EventEmitter</a></small></h4>    </div><div class="body"><div class="doc doc-main"><div class="indent"><p>The Domain class encapsulates the functionality of routing errors
and uncaught exceptions to the active Domain object.</p></div></div><h3 class="section">Variables</h3><div class="fields"><div class="field "><a name="members"></a><h3><p><code><span class="label">read only</span><a href="../../../js/node/domain/Domain.html#members"><span class="identifier">members</span></a>:<a class="type" title="An Array is a storage for values." href="../../../Array.html">Array</a>&lt;<a class="type" title="An abstract type allowing values to be either of T1 or T2 type." href="../../../haxe/extern/EitherType.html">EitherType</a>&lt;<a class="type" title="IEventEmitter interface is used as "any EventEmitter"." href="../../../js/node/events/IEventEmitter.html">IEventEmitter</a>, <a class="type" title="Base class for the opaque value returned by setTimeout and setInterval." href="../../../js/TimerObject.html">TimerObject</a>&gt;&gt;</code></p></h3><div class="doc"><p>An array of timers and event emitters that have been explicitly added to the domain.</p></div></div></div><h3 class="section">Methods</h3><div class="fields"><div class="field "><a name="add"></a><h3><p><code><a href="#add"><span class="identifier">add</span></a> (<span style="white-space:nowrap">emitter:<a class="type" title="IEventEmitter interface is used as "any EventEmitter"." href="../../../js/node/events/IEventEmitter.html">IEventEmitter</a></span>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p><p><code><a href="#add"><span class="identifier">add</span></a> (<span style="white-space:nowrap">emitter:<a class="type" title="Base class for the opaque value returned by setTimeout and setInterval." href="../../../js/TimerObject.html">TimerObject</a></span>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>Explicitly adds an <code>emitter</code> to the domain.</p>
<p>If any event handlers called by the emitter throw an error, or if the emitter emits an error event,
it will be routed to the domain's error event, just like with implicit binding.</p>
<p>This also works with timers that are returned from <code>setInterval</code> and <code>setTimeout</code>.
If their callback function throws, it will be caught by the domain 'error' handler.</p>
<p>If the Timer or EventEmitter was already bound to a domain, it is removed from that one,
and bound to this one instead.</p></div></div><div class="field "><a name="bind"></a><h3><p><code><a href="#bind"><span class="identifier">bind</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">callback:<span class="type">T</span></span>):<span class="type">T</span></code></p></h3><div class="doc"><p>The returned function will be a wrapper around the supplied <code>callback</code> function.
When the returned function is called, any errors that are thrown will be routed to the domain's error event.</p></div></div><div class="field "><a name="dispose"></a><h3><p><code><a href="#dispose"><span class="identifier">dispose</span></a> ():<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>The <code>dispose</code> method destroys a domain, and makes a best effort attempt
to clean up any and all IO that is associated with the domain.</p>
<p>Streams are aborted, ended, closed, and/or destroyed. Timers are cleared.
Explicitly bound callbacks are no longer called.</p>
<p>Any error events that are raised as a result of this are ignored.</p>
<p>The intention of calling <code>dispose</code> is generally to prevent cascading errors when a critical part of
the Domain context is found to be in an error state.</p>
<p>Once the domain is disposed the 'dispose' event will emit.</p>
<p>Note that IO might still be performed. However, to the highest degree possible, once a domain is disposed,
further errors from the emitters in that set will be ignored. So, even if some remaining actions are still
in flight, Node.js will not communicate further about them.</p></div></div><div class="field "><a name="enter"></a><h3><p><code><a href="#enter"><span class="identifier">enter</span></a> ():<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>The <code>enter</code> method is plumbing used by the <code>run</code>, <code>bind</code>, and <code>intercept</code> methods to set the active domain.</p>
<p>It sets <code>domain.active</code> and <code>process.domain</code> to the domain, and implicitly pushes the domain onto
the domain stack managed by the domain module (see <code>exit</code> for details on the domain stack).</p>
<p>The call to <code>enter</code> delimits the beginning of a chain of asynchronous calls and I/O operations bound to a domain.</p>
<p>Calling <code>enter</code> changes only the active domain, and does not alter the domain itself.
Enter and exit can be called an arbitrary number of times on a single domain.</p>
<p>If the domain on which <code>enter</code> is called has been disposed, <code>enter</code> will return without setting the domain.</p></div></div><div class="field "><a name="exit"></a><h3><p><code><a href="#exit"><span class="identifier">exit</span></a> ():<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>The <code>exit</code> method exits the current domain, popping it off the domain stack.</p>
<p>Any time execution is going to switch to the context of a different chain of asynchronous calls,
it's important to ensure that the current domain is exited. The call to <code>exit</code> delimits either the end of
or an interruption to the chain of asynchronous calls and I/O operations bound to a domain.</p>
<p>If there are multiple, nested domains bound to the current execution context,
<code>exit</code> will exit any domains nested within this domain.</p>
<p>Calling <code>exit</code> changes only the active domain, and does not alter the domain itself.
Enter and exit can be called an arbitrary number of times on a single domain.</p>
<p>If the domain on which <code>exit</code> is called has been disposed, <code>exit</code> will return without exiting the domain.</p></div></div><div class="field "><a name="intercept"></a><h3><p><code><a href="#intercept"><span class="identifier">intercept</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">callback:<span class="type">T</span></span>):<span class="type">T</span></code></p></h3><div class="doc"><p>This method is almost identical to <code>bind</code>. However, in addition to catching thrown errors, it will also
intercept <code><a href="../../../js/Error.html">Error</a></code> objects sent as the first argument to the function.</p>
<p>In this way, the common if (er != null) return callback(er); pattern
can be replaced with a single error handler in a single place.</p></div></div><div class="field "><a name="remove"></a><h3><p><code><a href="#remove"><span class="identifier">remove</span></a> (<span style="white-space:nowrap">emitter:<a class="type" title="IEventEmitter interface is used as "any EventEmitter"." href="../../../js/node/events/IEventEmitter.html">IEventEmitter</a></span>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p><p><code><a href="#remove"><span class="identifier">remove</span></a> (<span style="white-space:nowrap">emitter:<a class="type" title="Base class for the opaque value returned by setTimeout and setInterval." href="../../../js/TimerObject.html">TimerObject</a></span>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>The opposite of <code>add</code>. Removes domain handling from the specified emitter.</p></div></div><div class="field "><a name="run"></a><h3><p><code><a href="#run"><span class="identifier">run</span></a> (<span style="white-space:nowrap">fn:<a class="type" title="The standard Void type." href="../../../Void.html">Void</a>&nbsp;&#8209;&gt;&nbsp;<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></span>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>Run the supplied function in the context of the domain, implicitly binding all event emitters, timers,
and lowlevel requests that are created in that context.</p>
<p>This is the most basic way to use a domain.</p></div></div></div>  <div class="inherited-fields well"><h3 class="section">Inherited Variables</h3><div class="fields"><div style="display:none"></div></div><h3 class="section">Inherited Methods</h3><div class="fields"><h4><a href="#" class="expand-button"><i class="fa fa-arrow-circle-o-right"></i></a> Defined by <a class="type" title="All objects which emit events are instances of EventEmitter." href="../../../js/node/events/EventEmitter.html">EventEmitter</a></h4><div style="display:none"><div class="field "><a name="addListener"></a><h3><p><code><a href="#addListener"><span class="identifier">addListener</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;,</span> <span style="white-space:nowrap">listener:<span class="type">T</span></span>):<span class="type">TSelf</span></code></p></h3><div class="doc"><p>Adds a <code>listener</code> to the end of the listeners array for the specified <code>event</code>.</p></div></div><div class="field "><a name="emit"></a><h3><p><code><a href="#emit"><span class="identifier">emit</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;,</span> <span style="white-space:nowrap">args:<a class="type" title="A special abstract type that represents "rest" function argument." href="../../../haxe/extern/Rest.html">Rest</a>&lt;<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../../Dynamic.html">Dynamic</a>&gt;</span>):<a class="type" title="The standard Boolean type, which can either be true or false." href="../../../Bool.html">Bool</a></code></p></h3><div class="doc"><p>Execute each of the listeners in order with the supplied arguments.
Returns true if event had listeners, false otherwise.</p></div></div><div class="field "><a name="eventNames"></a><h3><p><code><a href="#eventNames"><span class="identifier">eventNames</span></a> ():<a class="type" title="An Array is a storage for values." href="../../../Array.html">Array</a>&lt;<a class="type" title="The basic String class." href="../../../String.html">String</a>&gt;</code></p></h3><div class="doc"><p>Returns an array listing the events for which the emitter has registered listeners.</p></div></div><div class="field "><a name="getMaxListeners"></a><h3><p><code><a href="#getMaxListeners"><span class="identifier">getMaxListeners</span></a> ():<a class="type" title="The standard Int type." href="../../../Int.html">Int</a></code></p></h3><div class="doc"><p>Returns the current max listener value for the <code><a href="../../../js/node/events/EventEmitter.html">EventEmitter</a></code> which is either set by <code>setMaxListeners</code>
or defaults to <code>defaultMaxListeners</code>.</p></div></div><div class="field "><a name="listeners"></a><h3><p><code><a href="#listeners"><span class="identifier">listeners</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;</span>):<a class="type" title="An Array is a storage for values." href="../../../Array.html">Array</a>&lt;<span class="type">T</span>&gt;</code></p></h3><div class="doc"><p>Returns an array of listeners for the specified event.</p></div></div><div class="field "><a name="on"></a><h3><p><code><a href="#on"><span class="identifier">on</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;,</span> <span style="white-space:nowrap">listener:<span class="type">T</span></span>):<span class="type">TSelf</span></code></p></h3><div class="doc"><p>Adds a <code>listener</code> to the end of the listeners array for the specified <code>event</code>.</p></div></div><div class="field "><a name="once"></a><h3><p><code><a href="#once"><span class="identifier">once</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;,</span> <span style="white-space:nowrap">listener:<span class="type">T</span></span>):<span class="type">TSelf</span></code></p></h3><div class="doc"><p>Adds a one time <code>listener</code> for the <code>event</code>.</p>
<p>This listener is invoked only the next time the event is fired, after which it is removed.</p></div></div><div class="field "><a name="prependListener"></a><h3><p><code><a href="#prependListener"><span class="identifier">prependListener</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;,</span> <span style="white-space:nowrap">listener:<span class="type">T</span></span>):<span class="type">TSelf</span></code></p></h3><div class="doc"><p>Adds the <code>listener</code> function to the beginning of the listeners array for the <code>event</code>.</p></div></div><div class="field "><a name="prependOnceListener"></a><h3><p><code><a href="#prependOnceListener"><span class="identifier">prependOnceListener</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;,</span> <span style="white-space:nowrap">listener:<span class="type">T</span></span>):<span class="type">TSelf</span></code></p></h3><div class="doc"><p>Adds a one time <code>listener</code> function for the <code>event</code> to the beginning of the listeners array.</p>
<p>This listener is invoked only the next time event is triggered, after which it is removed.</p></div></div><div class="field "><a name="removeAllListeners"></a><h3><p><code><a href="#removeAllListeners"><span class="identifier">removeAllListeners</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">?event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;</span>):<span class="type">TSelf</span></code></p></h3><div class="doc"><p>Removes all listeners, or those of the specified <code>event</code>.</p></div></div><div class="field "><a name="removeListener"></a><h3><p><code><a href="#removeListener"><span class="identifier">removeListener</span></a>&lt;<span class="type">T</span>&gt; (<span style="white-space:nowrap">event:<a class="type" title="Abstract type for events." href="../../../js/node/events/Event.html">Event</a>&lt;<span class="type">T</span>&gt;,</span> <span style="white-space:nowrap">listener:<span class="type">T</span></span>):<span class="type">TSelf</span></code></p></h3><div class="doc"><p>Remove a <code>listener</code> from the listener array for the specified <code>event</code>.</p>
<p>Caution: changes array indices in the listener array behind the listener.</p></div></div><div class="field "><a name="setMaxListeners"></a><h3><p><code><a href="#setMaxListeners"><span class="identifier">setMaxListeners</span></a> (<span style="white-space:nowrap">n:<a class="type" title="The standard Int type." href="../../../Int.html">Int</a></span>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>By default <code><a href="../../../js/node/events/EventEmitter.html">EventEmitter</a></code>s will print a warning if more than 10 listeners are added for a particular event.
This is a useful default which helps finding memory leaks.</p>
<p>Obviously not all Emitters should be limited to 10. This function allows that to be increased.
Set to zero for unlimited.</p></div></div></div></div></div></div></div></div></div><footer class="section dark site-footer"><div class="container"><div class="copyright"><p>&copy;2016&nbsp;<a href="http://haxe.org/foundation/" title="Haxe Foundation Website" class="hf-link">Haxe Foundation</a> |&nbsp;<a href="https://github.com/HaxeFoundation/haxe" title="Haxe on Github">Contribute to Haxe</a></p></div></div></footer><script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script></body></html>